(function(f){var a,e,b;var d=null;var c=0;f.fn.innerFade=function(g){return this.each(function(){f.innerFade(this,g);});};f.innerFade=function(h,k){b={animationType:"fade",animate:true,easing:"linear",speed:"normal",type:"sequence",timeout:2000,startDelay:0,loop:true,containerHeight:"auto",runningClass:"innerFade",children:null,cancelLink:null,pauseLink:".pause",prevLink:".prev",nextLink:".next",indexContainer:null,currentItemContainer:null,totalItemsContainer:null};if(k){b=f.extend(b,k);}e=(b.children===null)?f(h).children():f(h).children(b.children);h=h;if(e.length>1){f.bindControls();if(b.cancelLink){f.bindCancel();}f(h).css({position:"relative"}).addClass(b.runningClass);if(b.containerHeight=="auto"){height=f(e).filter(":first").height();f(h).css({height:height+"px"});}else{f(h).css({height:b.containerHeight});}if(b.indexContainer){f.innerFadeIndex();}f(e).filter(":gt(0)").hide(0);for(var l=0;l<e.length;l++){f(e[l]).css("z-index",String(e.length-l)).css("position","absolute");}var g="";var j="";if(b.type=="random"){j=Math.floor(Math.random()*e.length);do{g=Math.floor(Math.random()*e.length);}while(j==g);f(e[j]).show();}else{if(b.type=="random_start"){b.type="sequence";j=Math.floor(Math.random()*(e.length));g=(j+1)%e.length;}else{g=0;j=e.length-1;}}if(b.animate){f.fadeTimeout(g,j,true);}f.updateIndexes(g);if(b.type=="random"){f(e[j]).show();}else{f(e[g]).show();}if(b.currentItemContainer){f.currentItem(g);}if(b.totalItemsContainer){f.totalItems();}f.bindPause();}};f.fn.innerFadeTo=function(g){return this.each(function(h){var j=f(e).filter(":visible");var i=f(e).index(j);f.stopSlideshow();if(g!=i){f.fadeToItem(g,i);}});};f.fadeToItem=function(g,h){var j=function(){if(b.nextLink||b.prevLink){f.bindControls();}};if(b.animationType=="slide"){f(e[h]).slideUp(b.speed);f(e[g]).slideDown(b.speed,function(){buildPreviousNext();});}else{if(b.animationType=="slideOver"){var i=f(e[0]).width();f(a).css({overflow:"hidden"});f(e[h]).css({left:"0px",position:"absolute",right:"auto",top:"0px"});f(e[g]).css({left:"auto",position:"absolute",right:"-"+i+"px",top:"0px"}).show();f(e[h]).animate({left:"-"+i+"px"},b.speed,b.easing,function(){f(this).hide();});f(e[g]).animate({right:"0px"},b.speed,b.easing,function(){j();});}else{f(e[h]).fadeOut(b.speed);f(e[g]).fadeIn(b.speed,function(){j();});}}if(b.currentItemContainer){f.currentItem(g);}if(b.indexContainer){f.updateIndexes(g);}};f.fadeTimeout=function(g,h,j){if(j!=true){f.fadeToItem(g,h);}c++;if(b.loop==false&&c>=e.length){f.stopSlideshow();return;}if(b.type=="random"){h=g;while(g==h){g=Math.floor(Math.random()*e.length);}}else{h=(h>g)?0:g;g=(g+1>=e.length)?0:g+1;}var i=(j&&b.startDelay)?b.startDelay:b.timeout;d=setTimeout((function(){f.fadeTimeout(g,h,false);}),i);};f.fn.innerFadeUnbind=function(){return this.each(function(g){f.stopSlideshow();});};f.stopSlideshow=function(){clearTimeout(d);d=null;};f.bindControls=function(){f(b.nextLink).unbind().one("click",function(j){j.preventDefault();f.stopSlideshow();var h=f(e).filter(":visible");var k=f(e).index(h);var g=(h.next().length>0)?h.next():f(e).filter(":first");var i=f(e).index(g);f.fadeToItem(i,k);});f(b.prevLink).unbind().one("click",function(j){j.preventDefault();f.stopSlideshow();var h=f(e).filter(":visible");var k=f(e).index(h);var i=(h.prev().length>0)?h.prev():f(e).filter(":last");var g=f(e).index(i);f.fadeToItem(g,k);});};f.bindPause=function(){f(b.pauseLink).unbind().click(function(j){j.preventDefault();if(d!=null){f.stopSlideshow();}else{var h=f(a).children(":first").attr("tagName").toLowerCase();var g="";var i="";if(b.type=="random"){i=Math.floor(Math.random()*e.length);do{g=Math.floor(Math.random()*e.length);}while(i==g);}else{if(b.type=="random_start"){i=Math.floor(Math.random()*e.length);g=(i+1)%e.length;}else{i=f(h,f(a)).index(f(h+":visible",f(a)));g=((i+1)==e.length)?0:i+1;}}f.fadeTimeout(g,i,false);}});};f.bindCancel=function(){f(b.cancelLink).unbind().click(function(g){g.preventDefault();f.stopSlideshow();});};f.updateIndexes=function(g){f(b.indexContainer).children().removeClass("active");f("> :eq("+g+")",f(b.indexContainer)).addClass("active");};f.createIndexHandler=function(h,g){f(g).click(function(j){j.preventDefault();var k=f(e).filter(":visible");var i=f(e).index(k);f.stopSlideshow();if(k.size()<=1&&h!=i){f.fadeToItem(h,i);}});};f.createIndexes=function(){var g=f(b.indexContainer);for(var j=0;j<e.length;j++){var h=f('<li><a href="#">'+(j+1)+"</a></li>");f.createIndexHandler(j,h);g.append(h);}};f.linkIndexes=function(){var g=f(b.indexContainer);var j=f("> :visible",g);if(j.size()==e.length){var k=e.length;for(var h=0;h<k;h++){f("a",g).click(function(i){i.preventDefault();});f.createIndexHandler(h,j[h]);}}else{alert("There is a different number of items in the menu and slides. There needs to be the same number in both.\nThere are "+j.size()+" in the indexContainer.\nThere are "+e.length+" in the slides container.");}};f.innerFadeIndex=function(){var g=f(b.indexContainer);if(f(":visible",g).size()<=0){f.createIndexes();}else{f.linkIndexes();}};f.currentItem=function(g){var h=f(b.currentItemContainer);h.text(g+1);};f.totalItems=function(){var g=f(b.totalItemsContainer);g.text(e.length);};})(jQuery);